/*! jquery.kinetic - v2.0.0 - 2014-03-19 http://the-taylors.org/jquery.kinetic 
 * Copyright (c) 2014 Dave Taylor; Licensed MIT */
(function(e){"use strict";var t="kinetic-active";if(!window.requestAnimationFrame){window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()}e.support=e.support||{};e.extend(e.support,{touch:"ontouchend"in document});var n=function(){return false};var r=function(t,n){this.settings=n;this.el=t;this.$el=e(t);this._initElements();return this};r.DATA_KEY="kinetic";r.DEFAULTS={cursor:"move",decelerate:true,triggerHardware:false,y:true,x:true,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}};r.prototype.start=function(t){this.settings=e.extend(this.settings,t);this.velocity=t.velocity||this.velocity;this.velocityY=t.velocityY||this.velocityY;this.settings.decelerate=false;this._move()};r.prototype.end=function(){this.settings.decelerate=true};r.prototype.stop=function(){this.velocity=0;this.velocityY=0;this.settings.decelerate=true;if(e.isFunction(this.settings.stopped)){this.settings.stopped.call(this)}};r.prototype.detach=function(){this._detachListeners();this.$el.removeClass(t).css("cursor","")};r.prototype.attach=function(){if(this.$el.hasClass(t)){return}this._attachListeners(this.$el);this.$el.addClass(t).css("cursor",this.settings.cursor)};r.prototype._initElements=function(){this.$el.addClass(t);e.extend(this,{xpos:null,prevXPos:false,ypos:null,prevYPos:false,mouseDown:false,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null});this.velocity=0;this.velocityY=0;e(document).mouseup(e.proxy(this._resetMouse,this)).click(e.proxy(this._resetMouse,this));this._initEvents();this.$el.css("cursor",this.settings.cursor);if(this.settings.triggerHardware){this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})}};r.prototype._initEvents=function(){var t=this;this.settings.events={touchStart:function(e){var n;if(t._useTarget(e.target)){n=e.originalEvent.touches[0];t._start(n.clientX,n.clientY);e.stopPropagation()}},touchMove:function(e){var n;if(t.mouseDown){n=e.originalEvent.touches[0];t._inputmove(n.clientX,n.clientY);if(e.preventDefault){e.preventDefault()}}},inputDown:function(e){if(t._useTarget(e.target)){t._start(e.clientX,e.clientY);t.elementFocused=e.target;if(e.target.nodeName==="IMG"){e.preventDefault()}e.stopPropagation()}},inputEnd:function(e){if(t._useTarget(e.target)){t._end();t.elementFocused=null;if(e.preventDefault){e.preventDefault()}}},inputMove:function(e){if(t.mouseDown){t._inputmove(e.clientX,e.clientY);if(e.preventDefault){e.preventDefault()}}},scroll:function(n){if(e.isFunction(t.settings.moved)){t.settings.moved.call(t,t.settings)}if(n.preventDefault){n.preventDefault()}},inputClick:function(e){if(Math.abs(t.velocity)>0){e.preventDefault();return false}},dragStart:function(e){if(t.elementFocused){return false}}};this._attachListeners(this.$el,this.settings)};r.prototype.detectIE=function(){var e=window.navigator.userAgent;var t=e.indexOf("MSIE ");var n=e.indexOf("Trident/");if(t>0){return parseInt(e.substring(t+5,e.indexOf(".",t)),10)}if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}return false};r.prototype._inputmove=function(t,n){var r=this.$el;var i=this.el;if(!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout)){this.lastMove=new Date;if(this.mouseDown&&(this.xpos||this.ypos)){if(this.elementFocused){e(this.elementFocused).blur();this.elementFocused=null;if(!e(i).is("html")&&!this.detectIE())r.focus()}this.settings.decelerate=false;this.velocity=this.velocityY=0;i.scrollLeft=this.settings.scrollLeft=this.settings.x?i.scrollLeft-(t-this.xpos):i.scrollLeft;i.scrollTop=this.settings.scrollTop=this.settings.y?i.scrollTop-(n-this.ypos):i.scrollTop;this.prevXPos=this.xpos;this.prevYPos=this.ypos;this.xpos=t;this.ypos=n;this._calculateVelocities();this._setMoveClasses(this.settings.movingClass);if(e.isFunction(this.settings.moved)){this.settings.moved.call(r,this.settings)}}}};r.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity);this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity)};r.prototype._end=function(){if(this.xpos&&this.prevXPos&&this.settings.decelerate===false){this.settings.decelerate=true;this._calculateVelocities();this.xpos=this.prevXPos=this.mouseDown=false;this._move()}};r.prototype._useTarget=function(t){if(e.isFunction(this.settings.filterTarget)){return this.settings.filterTarget.call(this,t)!==false}return true};r.prototype._start=function(e,t){this.mouseDown=true;this.velocity=this.prevXPos=0;this.velocityY=this.prevYPos=0;this.xpos=e;this.ypos=t};r.prototype._resetMouse=function(){this.xpos=false;this.ypos=false;this.mouseDown=false};r.prototype._decelerateVelocity=function(e,t){return Math.floor(Math.abs(e))===0?0:e*t};r.prototype._capVelocity=function(e,t){var n=e;if(e>0){if(e>t){n=t}}else{if(e<0-t){n=0-t}}return n};r.prototype._setMoveClasses=function(e){var t=this.settings;var n=this.$el;n.removeClass(t.movingClass.up).removeClass(t.movingClass.down).removeClass(t.movingClass.left).removeClass(t.movingClass.right).removeClass(t.deceleratingClass.up).removeClass(t.deceleratingClass.down).removeClass(t.deceleratingClass.left).removeClass(t.deceleratingClass.right);if(this.velocity>0){n.addClass(e.right)}if(this.velocity<0){n.addClass(e.left)}if(this.velocityY>0){n.addClass(e.down)}if(this.velocityY<0){n.addClass(e.up)}};r.prototype._move=function(){var t=this.$el;var n=this.el;var r=this;var i=r.settings;if(i.x&&n.scrollWidth>0){n.scrollLeft=i.scrollLeft=n.scrollLeft+this.velocity;if(Math.abs(this.velocity)>0){this.velocity=i.decelerate?r._decelerateVelocity(this.velocity,i.slowdown):this.velocity}}else{this.velocity=0}if(i.y&&n.scrollHeight>0){n.scrollTop=i.scrollTop=n.scrollTop+this.velocityY;if(Math.abs(this.velocityY)>0){this.velocityY=i.decelerate?r._decelerateVelocity(this.velocityY,i.slowdown):this.velocityY}}else{this.velocityY=0}r._setMoveClasses(i.deceleratingClass);if(e.isFunction(i.moved)){i.moved.call(this,i)}if(Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0){if(!this.moving){this.moving=true;window.requestAnimationFrame(function(){r.moving=false;r._move()})}}else{r.stop()}};r.prototype._attachListeners=function(){var t=this.$el;var r=this.settings;if(e.support.touch){t.bind("touchstart",r.events.touchStart).bind("touchend",r.events.inputEnd).bind("touchmove",r.events.touchMove)}else{t.mousedown(r.events.inputDown).mouseup(r.events.inputEnd).mousemove(r.events.inputMove)}t.click(r.events.inputClick).scroll(r.events.scroll).bind("selectstart",n).bind("dragstart",r.events.dragStart)};r.prototype._detachListeners=function(){var t=this.$el;var r=this.settings;if(e.support.touch){t.unbind("touchstart",r.events.touchStart).unbind("touchend",r.events.inputEnd).unbind("touchmove",r.events.touchMove)}else{t.unbind("mousedown",r.events.inputDown).unbind("mouseup",r.events.inputEnd).unbind("mousemove",r.events.inputMove).unbind("scroll",r.events.scroll)}t.unbind("click",r.events.inputClick).unbind("selectstart",n).unbind("dragstart",r.events.dragStart)};e.Kinetic=r;e.fn.kinetic=function(t,n){return this.each(function(){var i=e(this);var s=i.data(r.DATA_KEY);var o=e.extend({},r.DEFAULTS,i.data(),typeof t==="object"&&t);if(!s){i.data(r.DATA_KEY,s=new r(this,o))}if(typeof t==="string"){s[t](n)}})}})(window.jQuery||window.Zepto)